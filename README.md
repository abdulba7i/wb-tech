–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ L0 –¥–ª—è WB

(–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–µ–∞–¥–º–∏ —Ñ–∞–π–ª)

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–∞–∑–µ
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å –ø—Ä–æ—Å—Ç–µ–π—à–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–º—É uid-–∑–∞–∫–∞–∑–∞.

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è ‚öôÔ∏è
–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è Docker.
–ó–∞–ø—É—Å–∫ üîß
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∫–æ–º–∞–Ω–¥—É:

make app-dev
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ localhost –Ω–∞ –ø–æ—Ä—Ç—É 8000.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å üåê
1. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞, –Ω—É–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ

http://localhost:8000/order/{uid}
2. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:

–ß–µ—Ä–µ–∑ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞:
–ø—Ä–æ–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥—É make app-dev-logs, –¥–∞–ª–µ–µ –≤ –≤—ã–≤–æ–¥–µ –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å "order_id" - —ç—Ç–æ –∏ –±—É–¥–µ—Ç UID –∑–∞–∫–∞–∑–∞. ‚†Ä‚†Ä‚†Ä
–ß–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Postgres:
–í —Ç–∞–±–ª–∏—Ü–µ orders –Ω–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ order_uid, –∑–∞—Ç–µ–º –≤–æ–∑—å–º–∏—Ç–µ –ª—é–±–æ–µ –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π UID‚†Ä ‚†Ä‚†Ä‚†Ä
–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–∏—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

make app-stop

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–∞–∑–µ
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å –ø—Ä–æ—Å—Ç–µ–π—à–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–º—É uid-–∑–∞–∫–∞–∑–∞.

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è ‚öôÔ∏è
–î–ª—è –∑–∞–ø—É—Å–∫–∞ —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –≤–∞—Å –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–µ:

Docker
–°–æ–∑–¥–∞—Ç—å –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ñ–∞–π–ª .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ —à–∞–±–ª–æ–Ω—É:
 POSTGRES_DB=l0
 POSTGRES_USER=postgres
 POSTGRES_PASSWORD=postgres

 REDIS_HOST=redis
 REDIS_PORT=6739
–ó–∞–ø—É—Å–∫ üîß
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∫–æ–º–∞–Ω–¥—É:

make app-dev
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ localhost –Ω–∞ –ø–æ—Ä—Ç—É 8000.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å üåê
1. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞, –Ω—É–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ

http://localhost:8000/order/{uid}
2. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:

–ß–µ—Ä–µ–∑ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞:
–ø—Ä–æ–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥—É make app-dev-logs, –¥–∞–ª–µ–µ –≤ –≤—ã–≤–æ–¥–µ –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å "order_id" - —ç—Ç–æ –∏ –±—É–¥–µ—Ç UID –∑–∞–∫–∞–∑–∞. ‚†Ä‚†Ä‚†Ä
–ß–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Postgres:
–í —Ç–∞–±–ª–∏—Ü–µ orders –Ω–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ order_uid, –∑–∞—Ç–µ–º –≤–æ–∑—å–º–∏—Ç–µ –ª—é–±–æ–µ –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π UID‚†Ä ‚†Ä‚†Ä‚†Ä
–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–∏—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

make app-stop

# Dockerized Usage üöÄ

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker –∏ Docker Compose.
2. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø–æ –ø—Ä–∏–º–µ—Ä—É:

```
POSTGRES_DB=l0
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
REDIS_HOST=redis
REDIS_PORT=6380
REDIS_PASSWORD=
REDIS_DB=0
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:

```
make app-dev
```

- –°–Ω–∞—á–∞–ª–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Ç–æ–ø–∏–∫ Kafka (`wb-tech-topic`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–æ–≤ (emulator-script), –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –≤ Kafka.
- –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å—Ç–∞—Ä—Ç—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π API-—Å–µ—Ä–≤–∏—Å.

4. API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ [http://localhost:8081/order/{uid}](http://localhost:8081/order/{uid})

5. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```
make app-dev-logs
```

6. –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –æ—á–∏—Å—Ç–∫–∏:

```
make app-stop
make app-clean
```

## –°–µ—Ä–≤–∏—Å—ã
- **api** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 8081)
- **emulator-script** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–æ–≤ (–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã)
- **kafka, zookeeper, redis, kafka-ui** ‚Äî –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- –¢–æ–ø–∏–∫ Kafka —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å `kafka-init`.
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á–µ—Ä–µ–∑ `.env`.
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Go, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ —Ä–∞–Ω–µ–µ.